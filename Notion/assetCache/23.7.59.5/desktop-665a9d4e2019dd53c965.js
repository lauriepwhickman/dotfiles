(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"3Tmf":function(e,t,o){"use strict";o.r(t),o.d(t,"PushNotification",(function(){return g}));o("ioFf"),o("rGqo");var a=o("NNnf"),r=o("6SEd"),c=o("LvDl"),s=o("kaWB"),l=o("V1wX"),n=o("NoAG"),i=o("njgS"),d=o("AvkE"),u=o("GJWe"),m=o("cBa6");function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e){const{activity:t,getRecordValue:o,baseURL:b,userTimeZone:f,intl:g}=e,y=Object(a.b)(p({},e)),k=Object(a.a)(y,g),N=Object(a.g)(p({},e,{intl:g})),j=Object(a.c)(p({},e,{intl:g})),_=Object(a.f)(p({},e,{intl:g}));switch(t.type){case"top-level-block-created":return{subject:g.formatMessage(a.h.topLevelBlockCreated,{userName:k,targetName:N,spaceName:_})};case"top-level-block-deleted":return{subject:g.formatMessage(a.h.topLevelBlockDeleted,{userName:k,targetName:N,spaceName:_})};case"collection-row-created":return{subject:g.formatMessage(a.h.collectionRowCreated,{userName:k,targetName:N,collectionName:j})};case"collection-row-deleted":return{subject:g.formatMessage(a.h.collectionRowDeleted,{userName:k,targetName:N,collectionName:j})};case"block-edited":{let s;if(t.edits){const l=t.edits[0];if("block-changed"===l.type){const t=l.block_data.after.block_value;if("page"===t.type&&t.parent_table===r.a){const t=l.block_schema||i.f(g),r=d.g({before:l.block_data.before.block_value,after:l.block_data.after.block_value,schema:t}).filter(e=>{const o=t[e];return o&&"formula"!==o.type}).map(r=>{const c=t[r],s=c?c.name:void 0,n=Object(a.n)({intl:g,property:r,schema:t,block:l.block_data.after.block_value,getRecordValue:o,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||g.formatMessage(a.h.emptyBlockEditedProperty);return g.formatMessage(a.h.propertyNameAndValueEdited,{propertyName:s,propertyValue:n})}),n=d.h({before:l.block_data.before.block_value,after:l.block_data.after.block_value}),u=c.compact(n.map(e=>{const t=Object(a.k)({formatProperty:e,intl:g}),r=Object(a.j)({formatProperty:e,intl:g,block:l.block_data.after.block_value,getRecordValue:o});if(t&&r)return g.formatMessage(a.h.propertyNameAndValueEdited,{propertyName:t,propertyValue:r})}));s=g.formatList(r.concat(u),{type:"conjunction",style:"narrow"})}else s=Object(a.i)({intl:g,blockValue:t,getRecordValue:o,baseURL:b,userTimeZone:f})}else if("block-created"===l.type){const e=l.block_data.block_value;s=Object(a.i)({intl:g,blockValue:e,getRecordValue:o,baseURL:b,userTimeZone:f})}else if("block-deleted"===l.type){const e=l.block_data.block_value,t=Object(a.i)({intl:g,blockValue:e,getRecordValue:o,baseURL:b,userTimeZone:f});s=g.formatMessage(a.h.blockDeletedEditBody,{renderedBlock:t})}}return{subject:g.formatMessage(a.h.blockEditedNotification,{userName:k,blockName:N}),body:s}}case"permissions-edited":return{subject:g.formatMessage(a.h.userEditedPermissionsFor,{userName:k,targetName:N}),body:Object(a.m)({intl:g,activity:t,getRecordValue:o,userTimeZone:e.userTimeZone})};case"user-mentioned":return{subject:g.formatMessage(a.h.userMentionedIn,{userName:k,targetName:N}),body:Object(a.o)({intl:g,getRecordValue:o,baseURL:b,userTimeZone:e.userTimeZone,blockId:t.mentioned_block_id,property:t.mentioned_property})};case"commented":{let r;if(t.edits){const c=t.edits[0];if("comment-created"===c.type){const t=o({table:s.a,id:c.comment_id}),a=c.comment_data||t;a&&(r="ðŸ’¬ "+u.k({intl:g,textValue:a.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone}))}else if("comment-changed"===c.type)r="ðŸ’¬ "+u.k({intl:g,textValue:c.comment_data.after.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone});else{const t=o({table:s.a,id:c.comment_id}),l=c.comment_data||t;if(l){const t=u.k({intl:g,textValue:l.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone});r=g.formatMessage(a.h.userDeletedComment,{commentText:t})}}}return{subject:g.formatMessage(a.h.userCommentedSubject,{userName:k,targetName:N}),body:r}}case"user-invited":if(t.permission_group_id)return{subject:g.formatMessage(a.h.userAddedToSpace,{userName:k,workspaceName:N})};return{subject:0===y.filter(l.f).length?g.formatMessage(a.h.userInvitedToSpaceByBot,{workspaceName:N}):g.formatMessage(a.h.userInvitedToSpace,{userName:k,workspaceName:N})};case"collection-edited":{let e,o=g.formatMessage(a.h.userEditedCollectionSubject,{userName:k,collectionName:N});if(t.edits){const r=t.edits[0];if("collection-changed"===r.type&&r.collection_data){const t=r.collection_data.after?r.collection_data.after.description:void 0,c=r.collection_data.before?r.collection_data.before.description:void 0;c&&!t?o=g.formatMessage(a.h.collectionDescriptionDeleted,{userName:k,collectionName:N}):!c&&t?(o=g.formatMessage(a.h.collectionDescriptionCreated,{userName:k,collectionName:N}),e=m.cb(t)):c&&t&&d.n(c,t)&&(e=m.cb(t))}else if("collection-created"===r.type&&r.collection_data){const t=r.collection_data.description;t&&(o=g.formatMessage(a.h.userCreatedCollectionSubject,{userName:k,collectionName:N}),e=m.cb(t))}}return{subject:o,body:e}}case"collection-view-edited":const p=e.getRecordValue({table:n.a,id:t.collection_view_id}),h=p&&p.name||g.formatMessage(a.h.untitledCollectionView);return{subject:g.formatMessage(a.h.collectionViewEditedSubject,{userName:k,collectionViewName:h,collectionName:N})};case"collection-property-edited":const v=t.edits&&t.edits[0],O=v&&("collection-property-changed"===v.type?v.collection_property_data.after.name:v.collection_property_data.name)||g.formatMessage(a.h.collectionPropertyEditedUnknown);return t.collection_property_id,{subject:g.formatMessage(a.h.collectionPropertyEditedSubject,{userName:k,propertyType:O,collectionName:N})};case"reminder":return{subject:g.formatMessage(a.h.reminderSubject,{pageName:N}),body:Object(a.o)({getRecordValue:o,baseURL:b,userTimeZone:e.userTimeZone,blockId:t.reminder_block_id,property:t.reminder_property,intl:g})};case"permission-group-edited":return{subject:Object(a.l)({activity:t,intl:g,userName:k,targetName:N})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===t.type?g.formatMessage(a.h.pageLockedActivity,{userName:k,pageName:N}):g.formatMessage(a.h.pageUnlockedActivity,{userName:k,pageName:N})};case"email-edited":return{subject:g.formatMessage(a.h.emailEditedActivity,{userName:k})};case"access-requested":return{subject:g.formatMessage(a.h.accessRequestedSubject,{userName:k,pageName:N})}}}}}]);